# Smart Voice Recorder with Continuous VAD

An Android application implementing continuous Voice Activity Detection (VAD) for automatic speech recording and transcription.

## Overview

This application provides voice recording by continuously monitoring audio input and automatically capturing speech segments. Each detected speech is saved as separate audio and text files.

## Key Features

- **Continuous Voice Activity Detection** - Single activation enables persistent audio monitoring
- **Automatic Recording Control** - Speech detection triggers recording start/stop automatically
- **Intelligent Silence Detection** - 5-second silence threshold for automatic recording termination
- **Offline Speech Recognition** - Vosk-powered STT that works without internet connection
- **Turkish-English Translation** - ML Kit offline translation between Turkish and English
- **Automatic File Generation** - Creates WAV audio files and text transcriptions with translations
- **API Integration** - Mock API upload functionality for recorded content
- **File Management System** - Organized storage with browsable directory structure
- **Session Management** - Automatic cleanup of previous recordings on new session start

## Voice Recording Implementation

### Operating Modes:

- **Continuous Monitoring** - Persistent audio input analysis
- **Automatic Recording** - Speech-triggered recording initiation
- **Silence-Based Termination** - 5-second timeout for recording completion
- **Manual Override** - User-controlled session termination

### File Output:

- **Audio Format** - WAV files for universal compatibility
- **Text Format** - Plain text transcriptions with recording details
- **Naming Convention** - Timestamp-based: `voice_YYYYMMDD_HHMMSS.wav/txt`
- **Automatic Metadata** - Recording details included in text files

### Key Features:

- **Offline Voice Activity Detection** - Automatically detects when you start and stop speaking without internet
- **Real-time Processing** - Immediate response to voice input using on-device STT
- **Smart Filtering** - Ignores very short sounds
- **Turkish-English Translation** - Automatic language detection and translation
- **Status Updates** - Clear feedback on current operation

## File Management System

### Directory Structure:

- **Root Directory** - Application internal storage with voice_recordings subdirectory
- **Voice Recordings Folder** - Isolated storage for audio/text file pairs
- **File Statistics** - Real-time file count display
- **Navigation System** - Hierarchical browsing with breadcrumb navigation

### File Types:

- **Audio Files (.wav)** - Recorded speech segments
- **Transcription Files (.txt)** - Speech-to-text output with metadata
- **System Files** - Application configuration and sample data

### File Interaction:

#### Audio File Playback:

- **Action**: Tap on `.wav` file
- **Behavior**: Play/pause audio using built-in media player
- **Visual Feedback**: Play/pause icon updates in real-time

#### Transcription File Viewing:

- **Action**: Tap on `.txt` transcription file
- **Behavior**: Display clean dialog showing only:
  - **Duration**: Recording length (e.g., "3.46s")
  - **Transcription**: Complete speech-to-text content
- **Interface**: Modal dialog with "Close" button
- **Format**: Simplified view without technical metadata

### Storage Organization:

```
Root Directory/
├── voice_recordings/
│   ├── voice_20250109_143022.wav
│   ├── voice_20250109_143022.txt
│   ├── voice_20250109_143035.wav
│   └── voice_20250109_143035.txt
├── sample1.txt
└── sample2.txt
```

## System Requirements

- **Microphone Access** - Required for voice recording
- **Storage Access** - Required for saving files

### File Formats:

#### Audio Files (.wav):

- Standard WAV format for broad compatibility

#### Transcription Files (.txt):

```
=== VOICE RECORDING TRANSCRIPT ===
Timestamp: 2025-01-09 14:30:22
Audio File: voice_20250109_143022.wav
Duration: 3.46s
Sample Rate: 16000Hz
Samples: 55296
================================

TRANSCRIPTION:
Hello, how are you today?

Generated by Voice Recorder App
```

## System Logging

### Debug Output:

Comprehensive logging system for monitoring application state and debugging:

```
CONTINUOUS VAD MODE ACTIVATED - Listening for speech segments
Cleared 6 previous recording files
CONTINUOUS VAD ACTIVE - Buffer size: 3200
SPEECH DETECTED - Recording initiated
RECORDING SPEECH SEGMENT - Started at 14:30:22
SPEECH ENDED - Silence detected. Duration: 3456ms
Auto-stopping, saving & sending speech segment
SPEECH SEGMENT ENDED - Duration: 3456ms
Processing 55296 audio samples
CREATING FILES after recording completion:
   Audio file: voice_20250109_143022.wav
   Text file: voice_20250109_143022.txt
Audio file saved: 221184 bytes
Transcript file saved: 1247 bytes
SENDING TO API - Both files ready for upload:
   Audio: voice_20250109_143022.wav (221184 bytes)
   Transcript: voice_20250109_143022.txt (1247 bytes)
   Content: "Hello, how are you today?"
SUCCESS - Speech segment uploaded
```

## Use Cases

### Application Scenarios:

- **Voice Notation** - Rapid idea capture and reminder creation
- **Meeting Documentation** - Automated transcription of discussions
- **Educational Recording** - Lecture and presentation capture
- **Content Creation** - Interview and Q&A session recording
- **Personal Documentation** - Voice diary and note-taking

### System Behavior:

- **Extended Speech** - Automatically split into separate files when you pause
- **Brief Utterances** - Short recordings are saved as individual files
- **Natural Pauses** - Handles normal speaking pauses automatically
- **Noise Filtering** - Ignores background noise and focuses on speech

## Operational Workflow

### Standard Session:

1. **Session Initialization**:

   ```
   Action: Microphone activation
   Response: File cleanup, continuous monitoring initiation
   ```

2. **Speech Processing Cycle**:

   ```
   Input: "Record this important note"
   Output: voice_20250109_143022.wav + .txt

   Pause: 5-second silence detection

   Input: "And also remember to call John"
   Output: voice_20250109_143035.wav + .txt

   Pause: 5-second silence detection

   Input: "Meeting is at 3 PM tomorrow"
   Output: voice_20250109_143048.wav + .txt
   ```

3. **Session Termination**:
   ```
   Action: Manual microphone deactivation
   Response: Monitoring cessation, file preservation
   ```

## Project Structure

```
KotlinProject/
├── app/
│   ├── src/main/
│   │   ├── java/com/example/myapplication/
│   │   │   ├── VoiceFragment.kt          // Core recording implementation
│   │   │   ├── FileListFragment.kt       // File system browser
│   │   │   ├── FileAdapter.kt            // File display adapter
│   │   │   ├── HomeFragment.kt           // Application home screen
│   │   │   ├── GalleryFragment.kt        // Media gallery component
│   │   │   └── MainActivity.kt           // Primary activity controller
│   │   ├── res/
│   │   │   ├── drawable/                 // Vector icons and graphics
│   │   │   ├── layout/                   // XML UI definitions
│   │   │   └── values/                   // String resources and themes
│   │   └── AndroidManifest.xml          // Application configuration
├── README.md                            // Project documentation
└── build.gradle                         // Build configuration
```

## Installation and Setup

### Prerequisites:

- Android Studio IDE
- Android device or emulator (API 21+)
- Microphone hardware capability

### Build Process:

1. Clone repository to local development environment
2. Import project into Android Studio
3. Execute build process (gradlew assembleDebug)
4. Install APK on target device
5. Grant required runtime permissions

### Initial Configuration:

1. Launch application and navigate to Voice Recorder fragment
2. Activate microphone button to initialize VAD system
3. Begin speech input for automatic recording
4. Access File List fragment to review generated recordings

## Configuration

Voice detection sensitivity and timing parameters can be adjusted in the source code if needed.

## Device Compatibility

### System Requirements:

- **Android API Level**: 21+ (Android 5.0 Lollipop)
- **Audio Hardware**: Microphone input capability
- **Storage Access**: Internal file system permissions
- **Memory**: Standard Android application requirements

### Testing Environment:

- Android Studio emulator platform
- Physical Android devices
- Multiple microphone hardware configurations

## Verification Criteria

### Expected System Behavior:

- Real-time audio level monitoring and display
- Automatic recording state transitions
- File generation in voice_recordings directory
- Status indicator updates reflecting current operation
- Comprehensive logging output in system console

## Troubleshooting

### Common Issues:

- **Audio Detection Failure**: Verify microphone permissions in system settings
- **File Creation Problems**: Confirm internal storage access permissions
- **Recording Persistence**: Adjust VAD_THRESHOLD for microphone sensitivity
- **Application Crashes**: Review logcat output for exception details

### Debug Monitoring:

Filter Android Studio logcat by `VoiceRecorder` tag for detailed operation tracking.

---

**Technical Implementation**: Kotlin-based Android application with continuous VAD processing, offline Vosk STT, ML Kit translation, and automatic file management.
